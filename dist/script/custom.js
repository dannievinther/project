!function(){const e=document.querySelector(".main-header");if(!e)return;new IntersectionObserver((([e])=>e.target.classList.toggle("is-pinned",e.intersectionRatio<1)),{threshold:1}).observe(e)}();const e=document.querySelectorAll("section"),t=/(\.[a-z])/gi;e.forEach(((e,o)=>{const l=e.querySelector(".editor > style"),r=e.querySelector(".editor > textarea"),n=`${o+1}`,a=`box-${o+1}`;let c=0,i=r.innerHTML;const d=e.querySelector(".container"),s=e.querySelector(".reset"),u=e.querySelector(".plus"),m=e.querySelector(".minus");function g(){localStorage.getItem(n)||""===r.value?(localStorage.removeItem(n),l.innerHTML=null,r.value=i,r.focus(),s.disabled=!0,b()):s.disabled=!1}function h(e){return e.replaceAll(t,(e=>`[data-exercise-key="${n}"] ${e}`))}function v(){const e=d.children.length,t=document.createElement("div");t.className=`box box-${e+1}`,t.setAttribute("contenteditable",!0),d.appendChild(t)}function S(){c<0||localStorage.setItem(a,c)}s.addEventListener("click",(function(){(""===r.value||window.confirm(`Do you really want to reset exercise ${n}?`))&&g()})),(u||m)&&(localStorage.getItem(a)?(c=localStorage.getItem(a),m.disabled=!(c>0)):m.disabled=!(c>0),u.addEventListener("click",(e=>{v(),c++,m.disabled=!1,S()})),m.addEventListener("click",(e=>{!function(){if(d.children.length-1){const e=d.lastElementChild;d.removeChild(e)}}(),m.disabled=d.children.length<=1,0!==c&&(c--,S())}))),[...d.children].forEach(((e,t)=>{e.className=`box box-${t+1}`}));const b=()=>{if(e.dataset.exerciseKey=`${o+1}`,l.innerHTML=h(r.value),localStorage.getItem(n)&&(r.value=localStorage.getItem(n),l.innerHTML=h(r.value)),(localStorage.getItem("7")||localStorage.getItem("8")||localStorage.getItem("9"))&&(document.documentElement.dataset.extra="true"),localStorage.getItem(a)){c=localStorage.getItem(a);for(let e=0;e<c;e++)v()}r.value!==i?s.disabled=!1:s.disabled=!0,r.addEventListener("input",(e=>{l.innerHTML=h(e.target.value),localStorage.setItem(n,r.value),""===r.value&&localStorage.removeItem(n),r.value!==i?s.disabled=!1:s.disabled=!0}))};b()}));const o=[];let l="";const r=["ArrowUp","ArrowUp","ArrowDown","ArrowDown","ArrowLeft","ArrowRight","ArrowLeft","ArrowRight","b","a"];document.addEventListener("keyup",(function(e){o.push(e.key),o.splice(-r.length-1,o.length-r.length),l=r.join(""),o.join("").includes(l)&&!document.documentElement.dataset.extra&&(document.documentElement.dataset.extra="true",document.querySelector("section[data-exercise-key='7']").scrollIntoView({behavior:"smooth"}))}));
