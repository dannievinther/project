!async function(){if(!window.Bliss){console.log("Bliss not loaded. Loading remotely from blissfuljs.com");let e=document.createElement("script");e.src="https://blissfuljs.com/bliss.shy.min.js",document.head.appendChild(e),await new Promise((t=>e.onload=t))}var e=Bliss,t=Bliss.$,s=Promise.resolve();if(document.currentScript){var i=document.currentScript.src,r=new URL(i).searchParams.get("load");if(null!==r){var n=["../css/prism-live.css"];r&&n.push(...r.split(/,/).map((e=>/\./.test(e)?e:`prism-live-${e}.js`))),s=Promise.all(n.map((t=>e.load(t,i))))}}var a,l,h=0===navigator.platform.indexOf("Mac")?"metaKey":"ctrlKey",o=Prism.Live=class{constructor(t){this.source=t,this.sourceType=t.nodeName.toLowerCase(),this.wrapper=e.create({className:"prism-live",around:this.source}),"textarea"===this.sourceType?(this.textarea=this.source,this.code=e.create("code"),this.pre=e.create("pre",{className:this.textarea.className+" no-whitespace-normalization",contents:this.code,before:this.textarea})):(this.pre=this.source,this.pre.classList.add("no-whitespace-normalization"),this.code=e("code",this.pre),this.textarea=e.create("textarea",{className:this.pre.className,value:this.pre.textContent,after:this.pre})),o.all.set(this.textarea,this),o.all.set(this.pre,this),o.all.set(this.code,this),this.pre.classList.add("prism-live"),this.textarea.classList.add("prism-live"),this.source.classList.add("prism-live-source"),self.Incrementable&&(new Incrementable(this.textarea),console.log(new Incrementable(this.textarea))),e.bind(this.textarea,{input:e=>this.update(),focus:e=>this.update(),keyup:e=>{"Enter"==e.key&&(this.insert(this.currentIndent),this.syncScroll())},keydown:t=>{if("Tab"!=t.key||t.altKey)if(o.pairs[t.key]){var s=o.pairs[t.key];this.wrapSelection({before:t.key,after:s,outside:!0}),t.preventDefault()}else for(let e in o.shortcuts)o.checkShortcut(e,t)&&(o.shortcuts[e].call(this,t),t.preventDefault());else if(t.preventDefault(),this.tabstops&&this.tabstops.length>0)this.moveCaret(this.tabstops.shift());else if(this.hasSelection){var i=this.beforeCaret("\n"),r=t.shiftKey;this.selectionStart-=i.length;var n=o.adjustIndentation(this.selection,{relative:!0,indentation:r?-1:1});if(this.replace(n),r){var a=o.regexp.gm`^${this.indent}`.test(i);this.selectionStart+=i.length+1-(r+a)}else{var l=i.length==this.selectionStart;this.selectionStart+=i.length+1+!l}}else{var h=o.match(this.beforeCaret(),/\S*$/);this.expandSnippet(h)?requestAnimationFrame((()=>e.fire(this.textarea,"input"))):this.insert(this.indent)}},click:e=>{this.getLine(),this.value,this.selectionStart},"click keyup":e=>{(!e.key||e.key.lastIndexOf("Arrow")>-1)&&(this.tabstops=null)}}),this.textarea.addEventListener("scroll",this,{passive:!0}),e.bind(window,{resize:e=>this.syncStyles()}),requestAnimationFrame((()=>{this.syncStyles();var e=getComputedStyle(this.source);this.pre.style.height=this.source.style.height||e.getPropertyValue("--height"),this.pre.style.maxHeight=this.source.style.maxHeight||e.getPropertyValue("--max-height")})),this.update(),this.lang=(this.code.className.match(/lang(?:uage)?-(\w+)/i)||[,])[1],this.observer=new MutationObserver((e=>{document.activeElement!==this.textarea&&(this.textarea.value=this.pre.textContent)})),this.observe(),this.source.dispatchEvent(new CustomEvent("prism-live-init",{bubbles:!0,detail:this}))}handleEvent(e){"scroll"===e.type&&this.syncScroll()}observe(){return this.observer&&this.observer.observe(this.pre,{childList:!0,subtree:!0,characterData:!0})}unobserve(){this.observer&&(this.observer.takeRecords(),this.observer.disconnect())}expandSnippet(e){if(!e)return!1;var t=this.context;if(e in t.snippets||e in o.snippets)var s=t.snippets[e]||o.snippets[e];else if(t.snippets.custom)s=t.snippets.custom.call(this,e);if(s){for(var i,r=[],n=[],a=s;i=o.CARET_INDICATOR.exec(a);)r.push(i.index+1),n.push(a.slice(0,i.index+i[1].length)),a=a.slice(i.index+i[0].length),o.CARET_INDICATOR.lastIndex=0;n.push(a),n=n.join(""),r.length>0&&(r[0]-=n.length),this.delete(e),this.insert(n,{matchIndentation:!0}),this.tabstops=r,this.moveCaret(this.tabstops.shift())}return!!s}get selectionStart(){return this.textarea.selectionStart}set selectionStart(e){this.textarea.selectionStart=e}get selectionEnd(){return this.textarea.selectionEnd}set selectionEnd(e){this.textarea.selectionEnd=e}get hasSelection(){return this.selectionStart!=this.selectionEnd}get selection(){return this.value.slice(this.selectionStart,this.selectionEnd)}get value(){return this.textarea.value}set value(e){this.textarea.value=e}get indent(){return o.match(this.value,/^[\t ]+/m,o.DEFAULT_INDENT)}get currentIndent(){var e=this.value.slice(0,this.selectionStart-1);return o.match(e,/^[\t ]*/gm,"",-1)}get currentLanguage(){var e=this.getNode();e=e?e.parentNode:this.code;var t=o.match(e.closest('[class*="language-"]').className,/language-(\w+)/,1);return o.aliases[t]||t}get context(){var e=this.currentLanguage;return o.languages[e]||o.languages.DEFAULT}update(t){var s=this.value;/\n$/.test(this.value)&&(s+="â€‹"),!t&&this.code.textContent===s&&e(".token",this.code)||(this.unobserve(),this.code.textContent=s,Prism.highlightElement(this.code),this.observe())}syncStyles(){var e=getComputedStyle(this.pre);this.textarea.style.caretColor=e.color;var t=/^(font|lineHeight)|[tT]abSize/gi;for(var s in e)e[s]&&s in this.textarea.style&&t.test(s)&&(this.wrapper.style[s]=e[s],this.textarea.style[s]=this.pre.style[s]="inherit");this.textarea.style["padding-left"]=e["padding-left"],this.update()}syncScroll(){0===this.pre.clientWidth&&0===this.pre.clientHeight||(this.pre.scrollTop=this.textarea.scrollTop,this.pre.scrollLeft=this.textarea.scrollLeft)}beforeCaretIndex(e=""){return this.value.lastIndexOf(e,this.selectionStart)}afterCaretIndex(e=""){return this.value.indexOf(e,this.selectionEnd)}beforeCaret(e=""){var t=this.beforeCaretIndex(e);return-1!==t&&e||(t=0),this.value.slice(t,this.selectionStart)}getLine(e=this.selectionStart){for(var t,s=this.value,i=this.selectionStart;(t=s[i])&&("\n"!==t&&"\r"!==t&&i);i--);for(var r=this.selectionStart;(t=s[r])&&("\n"!==t&&"\r"!==t);r++);return{start:i,end:r}}afterCaret(e=""){var t=this.afterCaretIndex(e);return-1!==t&&e||(t=void 0),this.value.slice(this.selectionEnd,t)}setCaret(e){this.selectionStart=this.selectionEnd=e}moveCaret(e){e&&this.setCaret(this.selectionEnd+e)}insert(e,{index:t}={}){if(e)if(this.textarea.focus(),void 0===t)this.replace(e);else{var s=this.selectionStart,i=this.selectionEnd;this.selectionStart=this.selectionEnd=t,this.replace(e),this.selectionStart=s+(t<s?e.length:0),this.selectionEnd=i+(t<=i?e.length:0)}}replace(e){var t=this.hasSelection;this.insertText(e),t&&(this.selectionStart=this.selectionEnd-e.length)}set(e,{start:t,end:s}={}){var i=this.selectionStart,r=this.selectionEnd;this.selectionStart=t,this.selectionEnd=s,this.insertText(e),this.selectionStart=i,this.selectionEnd=r}insertText(e){if(e){if(!0===o.supportsExecCommand)document.execCommand("insertText",!1,e);else if(void 0===o.supportsExecCommand){let t=this.value;document.execCommand("insertText",!1,e),o.supportsExecCommand=t!==this.value}return!1===o.supportsExecCommand&&(this.textarea.setRangeText(e,this.selectionStart,this.selectionEnd,"end"),requestAnimationFrame((()=>this.update()))),o.supportsExecCommand}}wrap({before:e,after:t,start:s=this.selectionStart,end:i=this.selectionEnd}={}){var r=this.selectionStart,n=this.selectionEnd,a=this.value.slice(s,i);this.set(e+a+t,{start:s,end:i}),r>s&&(r+=e.length),n>s&&(n+=e.length),r>i&&(r+=t.length),n>i&&(n+=t.length),this.selectionStart=r,this.selectionEnd=n}wrapSelection(e={}){var t=this.hasSelection;this.replace(e.before+this.selection+e.after),t?e.outside&&(this.selectionStart+=e.before.length,this.selectionEnd-=e.after.length):this.moveCaret(-e.after.length)}toggleComment(){var e=this.context.comments,t=this.getNode().parentNode.closest(".token.comment");if(t){var s=this.getOffset(t),i=t.textContent;if(e.singleline&&0===i.indexOf(e.singleline)){var r=s+i.length;this.set(this.value.slice(s+e.singleline.length,r),{start:s,end:r}),this.moveCaret(-e.singleline.length)}else{e=e.multiline||e;r=s+i.length-e[1].length;this.set(this.value.slice(s+e[0].length,r),{start:s,end:r+e[1].length})}}else this.hasSelection?(e=e.multiline||e,this.wrapSelection({before:e[0],after:e[1]})):(e=e.singleline?[e.singleline,""]:e.multiline||e,r=this.afterCaretIndex("\n"),this.wrap({before:e[0],after:e[1],start:this.beforeCaretIndex("\n")+1,end:r<0?this.value.length:r}))}duplicateContent(){var e=this.beforeCaret("\n"),t=this.afterCaret("\n"),s=e+this.selection+t;this.insert(s,{index:this.selectionStart-e.length})}delete(e,{forward:t,pos:s}={}){var i=e=e>0?e:(e+"").length;if(s){var r=this.selectionStart;this.selectionStart=s,this.selectionEnd=s+this.selectionEnd-r}for(;i--;)document.execCommand(t?"forwardDelete":"delete");s&&(this.selectionStart=r-e,this.selectionEnd=this.selectionEnd-s+this.selectionStart)}getNode(e=this.selectionStart,t=this.code){for(var s,i=0,r=document.createTreeWalker(t,NodeFilter.SHOW_TEXT);s=r.nextNode();)if((i+=s.data.length)>=e)return s;return null}getOffset(e){var t=document.createRange();return t.selectNodeContents(this.code),t.setEnd(e,0),t.toString().length}static match(e,t,s,i=0){"number"==typeof s&&3===arguments.length&&(i=s,s=void 0);var r=e.match(t);return i<0&&(i=r.length+i),r?r[i]:s}static checkShortcut(e,t){return e.trim().split(/\s*\+\s*/).every((e=>{switch(e){case"Cmd":return t[h];case"Ctrl":return t.ctrlKey;case"Shift":return t.shiftKey;case"Alt":return t.altKey;default:return t.key===e}}))}static registerLanguage(e,t,s=o.languages.DEFAULT){return Object.setPrototypeOf(t,s),o.languages[e]=t}static matchIndentation(e,t){e=e.replace(/\r?\n/g,"$&"+t)}static adjustIndentation(e,{indentation:t,relative:s=!0,indent:i=o.DEFAULT_INDENT}){if(!s){var r=e.match(o.regexp.gm`^(${i})+`).sort()[0];r&&e.replace(o.regexp.gm`^${r}`,"")}return t<0?e.replace(o.regexp.gm`^${i}`,""):t>0?e.replace(/^/gm,i):void 0}};Object.assign(o,{all:new WeakMap,ready:s,DEFAULT_INDENT:"\t",CARET_INDICATOR:/(^|[^\\])\$(\d+)/g,snippets:{test:"Snippets work!"},pairs:{"(":")","[":"]","{":"}",'"':'"',"'":"'","`":"`"},shortcuts:{"Cmd + /":function(){this.toggleComment()},"Ctrl + Shift + D":function(){this.duplicateContent()}},languages:{DEFAULT:{comments:{multiline:["/*","*/"]},snippets:{}}},aliases:(()=>{var e={},t=new WeakMap(Object.entries(Prism.languages).map((e=>e.reverse())).reverse());for(var s in Prism.languages){var i=Prism.languages[s];"function"!=typeof i&&(e[s]=t.get(i))}return e})(),regexp:(a=(e,t,...s)=>{var i=t[0]+s.map(((e,s)=>e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")+t[s+1])).join("");return RegExp(i,e)},l={},new Proxy(a.bind(o,""),{get:(e,t)=>e[t]||l[t]||(l[t]=a.bind(o,t))}))}),o.supportsExecCommand=!!document.execCommand&&void 0,e.ready().then((()=>{t(":not(.prism-live) > textarea.prism-live, :not(.prism-live) > pre.prism-live").forEach((e=>{o.all.get(e)||new o(e)}))}))}();
